// Generated automatically by ProvToolbox for template configuration 'template_library'
// by class org.openprovenance.prov.template.compiler.CompilerQueryInvoker, method generateQueryInvoker,
// in file CompilerQueryInvoker.java, at line 25
package org.openprovenance.prov.template.library.ptm.client.integrator;

public class QueryInvoker2 implements InputProcessor {
  final StringBuilder sb;

  public QueryInvoker2(StringBuilder sb) {
    this.sb = sb;
  }

  public final Ptm_expandingInputs process(Ptm_expandingInputs bean) {
    // Generated by class org.openprovenance.prov.template.compiler.CompilerQueryInvoker, method generateQueryInvoker
    // in file CompilerQueryInvoker.java, at line 59
    // Generated by class org.openprovenance.prov.template.compiler.CompilerQueryInvoker, method simpleQueryInvoker
    // in file CompilerQueryInvoker.java, at line 156
    sb.append("select * from ");
    sb.append("insert_ptm_expanding (");
    sb.append(bean.template);
    sb.append(",");
    sb.append(bean.bindings);
    sb.append(",");
    sb.append(bean.agent);
    sb.append(",");
    sb.append(bean.email);
    sb.append(",");
    sb.append(convertToTimestamptz(bean.time));
    sb.append(");");
    return bean;
  }

  public final Ptm_mexpandingInputs process(Ptm_mexpandingInputs bean) {
    // Generated by class org.openprovenance.prov.template.compiler.CompilerQueryInvoker, method generateQueryInvoker
    // in file CompilerQueryInvoker.java, at line 59
    // Generated by class org.openprovenance.prov.template.compiler.CompilerQueryInvoker, method simpleQueryInvoker
    // in file CompilerQueryInvoker.java, at line 156
    sb.append("select * from ");
    sb.append("insert_ptm_mexpanding (");
    sb.append(bean.mtemplate);
    sb.append(",");
    sb.append(bean.bindings);
    sb.append(",");
    sb.append(bean.agent);
    sb.append(",");
    sb.append(bean.email);
    sb.append(",");
    sb.append(convertToTimestamptz(bean.time));
    sb.append(");");
    return bean;
  }

  final String convertToTimestamptz(String time) {
    // Generated by class org.openprovenance.prov.template.compiler.CompilerQueryInvoker, method generateQueryInvoker
    // in file CompilerQueryInvoker.java, at line 78
    if (time==null) {
      return "NULL";
    } else {
      return "'"+time+"'::timestamptz";
    }
  }
}
