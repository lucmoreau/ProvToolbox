// Generated automatically by ProvToolbox for template configuration 'template_library'
// by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateCommonLib_aux,
// in file CompilerCommon.java, at line 90
package org.openprovenance.prov.template.library.ptm_copy.client.common;

import org.openprovenance.prov.client_copy.Builder;
import org.openprovenance.prov.client_copy.ProcessorArgsInterface;
import org.openprovenance.prov.client_copy.SQL;
import org.openprovenance.prov.template.library.ptm_copy.client.common.Ptm_mergingProcessor;
import org.openprovenance.prov.template.library.ptm_copy.client.integrator.Ptm_mergingIntegratorBuilder;

import java.util.HashMap;
import java.util.Map;

/**
 * Builder class for ptm_merging
 */
public class Ptm_mergingBuilder implements Builder, SQL {
  /**
   * Generated by method org.openprovenance.prov.template.compiler.common.CompilerCommon.generateFieldPropertyOrder()
   */
  public static final String[] propertyOrder = new String[] {"isA", "document", "provenance", "template1", "template2", "agent", "merging", "email", "time"};

  private static String _sqlInsert1 = "INSERT INTO  ptm_merging (document, provenance, template1, template2, agent, merging, email, time)";

  /**
   * Generated by method org.openprovenance.prov.template.compiler.common.CompilerCommon.generateCommonLib_aux()
   */
  public static final Ptm_mergingIntegratorBuilder __integrator = new Ptm_mergingIntegratorBuilder();

  public static final String[] outputs = new String[] {"document", "provenance", "merging"};

  public static final String[] inputs = new String[] {"template1", "template2", "agent", "email", "time"};

  /**
   * Generated by method org.openprovenance.prov.template.compiler.common.CompilerCommon.generateFieldCompulsoryInputs()
   */
  public static final String[] compulsoryInputs = new String[] {"template1", "template2"};

  /**
   * Generated by method org.openprovenance.prov.template.compiler.common.CompilerCommon.generateFieldForeignTables()
   */
  public static final String[] foreignTables = new String[] {"isA", "file", "file", "file", "file", null, "activity", null, null};

  public static final Map<Integer, int[]> __successors = __getSuccessors();

  public static final Map<Integer, int[]> __successors2 = __getTypedSuccessors();

  public static final int[] __nodes = __getNodes();

  public static final Map<String, Map<String, int[]>> __relations = __getRelations();

  public final Ptm_mergingProcessor<Ptm_mergingBean> aArgs2BeanConverter =  /*#lambda#*/ (String __document, String __provenance, String __template1, String __template2, Integer __agent, Integer __merging, String __email, String __time) -> /*#lbody#*/ {return toBean(__document, __provenance, __template1, __template2, __agent, __merging, __email, __time);
    }; /*#lend#*/;

    /**
     * Generated by method org.openprovenance.prov.template.compiler.common.CompilerCommon.generateField4aBeanConverter2()
     */
    public final ProcessorArgsInterface<Ptm_mergingBean> aRecord2BeanConverter =  (Object[] record) -> { return toBean(record); };

    /**
     * Generated by method org.openprovenance.prov.template.compiler.common.CompilerCommon.generateField4aSQLConverter2()
     */
    public final Ptm_mergingProcessor<String> aBean2SqlConverter = bean2sql();

    /**
     * Generated by method org.openprovenance.prov.template.compiler.common.CompilerCommon.generateField4aArgs2CsvConverter()
     */
    public final Ptm_mergingProcessor<String> aArgs2CsVConverter = args2csv();

    public final ProcessorArgsInterface<String> aRecord2SqlConverter =  (Object[] record) -> { return toBean(record).process(aBean2SqlConverter); };

    /**
     * Generated by method org.openprovenance.prov.template.compiler.common.CompilerCommon.generateField4aRecord2CsvConverter()
     */
    public final ProcessorArgsInterface<String> aRecord2CsvConverter =  (Object[] record) -> { return toBean(record).process(aArgs2CsVConverter); };

    /**
     * Default constructor for builder for template ptm_merging
     */
    public Ptm_mergingBuilder() {
    }

    public String getName() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateNameAccessor
      // in file CompilerCommon.java, at line 251
      return "ptm_merging";
    }

    /**
     * Null method for composite
     * @return the array of properties in order
     */
    public String[] getPropertyOrder() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generatePropertyOrderMethod
      // in file CompilerCommon.java, at line 957
      return propertyOrder;
    }

    public int[] getNodes() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateCommonMethodGetNodes
      // in file CompilerCommon.java, at line 932
      return __nodes;
    }

    public Map<Integer, int[]> getSuccessors() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateCommonMethodGetSuccessors
      // in file CompilerCommon.java, at line 1023
      return __successors;
    }

    public Map<Integer, int[]> getTypedSuccessors() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateCommonMethodGetTypedSuccessors
      // in file CompilerCommon.java, at line 1036
      return __successors2;
    }

    public ProcessorArgsInterface<String> record2csv(Object[] record) {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateRecordCsvProcessorMethod
      // in file CompilerCommon.java, at line 1011
      return aRecord2CsvConverter;
    }

    public String getSQLInsert() {
      // Generated by class org.openprovenance.prov.template.compiler.CompilerSQL, method generateSQLInsert
      // in file CompilerSQL.java, at line 211
      return _sqlInsert1;
    }

    public String getSQLInsertStatement() {
      // Generated by class org.openprovenance.prov.template.compiler.CompilerSQL, method generateSQLInsertStatement
      // in file CompilerSQL.java, at line 225
      return _sqlInsert1+" VALUES (?, ?, ?, ?, ?, ?, ?, ?);";
    }

    /**
     * Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateCommonLib_auxin file CompilerCommon.java, at line 126
     */
    public final Ptm_mergingIntegratorBuilder getIntegrator() {
      return __integrator;
    }

    /**
     * logPtm_merging client side logging method
     * @return Ptm_mergingProcessor
     */
    public Ptm_mergingProcessor<String> args2csv() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateCommonCSVConverterMethod_aux
      // in file CompilerCommon.java, at line 270
      Ptm_mergingBuilder self=this;
      return /*#lambda#*/ (String __document, String __provenance, String __template1, String __template2, Integer __agent, Integer __merging, String __email, String __time) -> /*#lbody#*/ {
        StringBuffer sb=new StringBuffer();
        self.logPtm_merging(sb, __document, __provenance, __template1, __template2, __agent, __merging, __email, __time);
        return sb.toString();
      }; /*#lend#*/
    }

    /**
     * logPtm_merging client side logging method
     * @return Ptm_mergingProcessor
     */
    public Ptm_mergingProcessor<String> bean2sql() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateCommonSQLConverterMethod_aux
      // in file CompilerCommon.java, at line 528
      Ptm_mergingBuilder self=this;
      return (String __document, String __provenance, String __template1, String __template2, Integer __agent, Integer __merging, String __email, String __time) -> { StringBuffer sb=new StringBuffer(); self.sqlTuple(sb, __document,  __provenance,  __template1,  __template2,  __agent,  __merging,  __email,  __time); return sb.toString(); };
    }

    /**
     * Returns a converter from arguments to record
     * @return Ptm_mergingProcessor
     */
    public Ptm_mergingProcessor<Object[]> aArgs2RecordConverter() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateArgsToRecordMethod
      // in file CompilerCommon.java, at line 581
      return (String __document, String __provenance, String __template1, String __template2, Integer __agent, Integer __merging, String __email, String __time) -> {  return new Object [] { getName(),  __document,  __provenance,  __template1,  __template2,  __agent,  __merging,  __email,  __time}; };
    }

    /**
     * Returns a converter from Processor taking arguments to Processor taking record
     * @param __processor a transformer for this template
     * @param <T> type variable for the result of processor
     * @return Ptm_mergingProcessor&lt;T&gt;
     */
    public <T> Ptm_mergingProcessor<T> processorConverter(
        final ProcessorArgsInterface<T> __processor) {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateProcessorConverter
      // in file CompilerCommon.java, at line 623
      return (String __document, String __provenance, String __template1, String __template2, Integer __agent, Integer __merging, String __email, String __time) -> {  return __processor.process(new Object [] { getName(),  __document,  __provenance,  __template1,  __template2,  __agent,  __merging,  __email,  __time}); };
    }

    /**
     * Returns a converter from Processor taking arguments to Processor taking record
     * @param processor a transformer for this template
     * @param <T> type variable for the result of processor
     * @return ProcessorArgsInterface&lt;T&gt;
     */
    public <T> ProcessorArgsInterface<T> processorConverter(
        final Ptm_mergingProcessor<T> processor) {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateProcessorConverter2
      // in file CompilerCommon.java, at line 691
      return (Object [] record) -> {  return processor.process( (String) record[1],  (String) record[2],  (String) record[3],  (String) record[4],  (record[5]==null)?null:((record[5] instanceof String)?Integer.valueOf((String)(record[5])):(Integer)(record[5])),  (record[6]==null)?null:((record[6] instanceof String)?Integer.valueOf((String)(record[6])):(Integer)(record[6])),  (String) record[7],  (String) record[8]); };
    }

    /**
     * Apply method
     * @param processor a transformer for this template
     * @param record as an array of Objects
     * @param <T> type variable for the result of processor
     * @return an object of type T
     */
    public <T> T apply(Ptm_mergingProcessor<T> processor, Object[] record) {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateApplyMethod
      // in file CompilerCommon.java, at line 754
      return toBean(record).process(processor);
    }

    /**
     * Logger method
     * @param sb a StringBuffer
     * @param __document The document resulting from template merging
     * @param __provenance The provenance of the document resulting from the template merging
     * @param __template1 The first template to be merged
     * @param __template2 The second template to be merged
     * @param __agent The agent controlling the merge
     * @param __merging The activity of merging the templates
     * @param __email The agent's email
     * @param __time Time when the transformed file is created
     */
    public void logPtm_merging_impure(StringBuffer sb, String __document, String __provenance,
        String __template1, String __template2, Integer __agent, Integer __merging, String __email,
        String __time) {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateLoggerMethod
      // in file CompilerCommon.java, at line 811
      sb.append("[ptm_merging,");
      if (__document==null) /*#then#*/ {
        sb.append(__document);
      } else /*#else#*/ {
        sb.append(__document);
      } /*#endif#*/;
      sb.append(",");
      if (__provenance==null) /*#then#*/ {
        sb.append(__provenance);
      } else /*#else#*/ {
        sb.append(__provenance);
      } /*#endif#*/;
      sb.append(",");
      if (__template1==null) /*#then#*/ {
        sb.append(__template1);
      } else /*#else#*/ {
        sb.append(__template1);
      } /*#endif#*/;
      sb.append(",");
      if (__template2==null) /*#then#*/ {
        sb.append(__template2);
      } else /*#else#*/ {
        sb.append(__template2);
      } /*#endif#*/;
      sb.append(",");
      if (__agent==null) /*#then#*/ {
      } else /*#else#*/ {
        sb.append("");
        sb.append(__agent);
      } /*#endif#*/;
      sb.append(",");
      if (__merging==null) /*#then#*/ {
      } else /*#else#*/ {
        sb.append("");
        sb.append(__merging);
      } /*#endif#*/;
      sb.append(",");
      if (__email==null) /*#then#*/ {
        sb.append(__email);
      } else /*#else#*/ {
        sb.append(__email);
      } /*#endif#*/;
      sb.append(",");
      if (__time==null) /*#then#*/ {
        sb.append(__time);
      } else /*#else#*/ {
        sb.append(__time);
      } /*#endif#*/;
      sb.append("]");
    }

    /**
     * Logger method
     * @param sb a StringBuffer
     * @param __document The document resulting from template merging
     * @param __provenance The provenance of the document resulting from the template merging
     * @param __template1 The first template to be merged
     * @param __template2 The second template to be merged
     * @param __agent The agent controlling the merge
     * @param __merging The activity of merging the templates
     * @param __email The agent's email
     * @param __time Time when the transformed file is created
     */
    public void logPtm_merging(StringBuffer sb, String __document, String __provenance,
        String __template1, String __template2, Integer __agent, Integer __merging, String __email,
        String __time) {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateLoggerMethod
      // in file CompilerCommon.java, at line 811
      sb.append("ptm_merging,");
      if (__document==null) /*#then#*/ {
      } else /*#else#*/ {
        sb.append(__document);
      } /*#endif#*/;
      sb.append(",");
      if (__provenance==null) /*#then#*/ {
      } else /*#else#*/ {
        sb.append(__provenance);
      } /*#endif#*/;
      sb.append(",");
      if (__template1==null) /*#then#*/ {
      } else /*#else#*/ {
        sb.append(__template1);
      } /*#endif#*/;
      sb.append(",");
      if (__template2==null) /*#then#*/ {
      } else /*#else#*/ {
        sb.append(__template2);
      } /*#endif#*/;
      sb.append(",");
      if (__agent==null) /*#then#*/ {
      } else /*#else#*/ {
        sb.append("");
        sb.append(__agent);
      } /*#endif#*/;
      sb.append(",");
      if (__merging==null) /*#then#*/ {
      } else /*#else#*/ {
        sb.append("");
        sb.append(__merging);
      } /*#endif#*/;
      sb.append(",");
      if (__email==null) /*#then#*/ {
      } else /*#else#*/ {
        sb.append(__email);
      } /*#endif#*/;
      sb.append(",");
      if (__time==null) /*#then#*/ {
      } else /*#else#*/ {
        sb.append(__time);
      } /*#endif#*/;
      sb.append("");
    }

    public static int[] __getNodes() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateCommonMethod3static
      // in file CompilerCommon.java, at line 895
      return new int[] {1, 2, 3, 4, 5, 6};
    }

    public static Map<Integer, int[]> __getSuccessors() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateCommonMethod4static
      // in file CompilerCommon.java, at line 1051
      Map<Integer, int[]> table = new HashMap<Integer, int[]>();
      table.put(1,new int[] { });
      table.put(2,new int[] { });
      table.put(3,new int[] { 1});
      table.put(4,new int[] { 2});
      table.put(5,new int[] { });
      table.put(6,new int[] { });
      return table;
    }

    public static Map<String, Map<String, int[]>> __getRelations() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateGetRelations
      // in file CompilerCommon.java, at line 1114
      Map<String, Map<String, int[]>> table = new HashMap<>();
      Map<String, int[]> map2;
      map2 = new HashMap<>();
      map2.put("--n2--", (new int[] { 1, 3, 6 }));
      map2.put("--n3--", (new int[] { 2, 4, 6 }));
      table.put("PROV_DERIVATION",map2);
      map2 = new HashMap<>();
      map2.put("--0--", (new int[] { 1, 5}));
      map2.put("--1--", (new int[] { 2, 5}));
      table.put("PROV_ATTRIBUTION",map2);
      map2 = new HashMap<>();
      map2.put("--0--", (new int[] { 6, 5, -1}));
      table.put("PROV_ASSOCIATION",map2);
      map2 = new HashMap<>();
      map2.put("--0--", (new int[] { 1, 6}));
      map2.put("--1--", (new int[] { 2, 6}));
      table.put("PROV_GENERATION",map2);
      map2 = new HashMap<>();
      map2.put("--0--", (new int[] { 6, 3}));
      map2.put("--1--", (new int[] { 6, 4}));
      table.put("PROV_USAGE",map2);
      return table;
    }

    public static Map<Integer, int[]> __getTypedSuccessors() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateCommonMethod5static
      // in file CompilerCommon.java, at line 1447
      Map<Integer, int[]> table = new HashMap<Integer, int[]>();
      table.put(1,new int[] { });
      table.put(2,new int[] { });
      table.put(3,new int[] { 1, 9 /* PROV_DERIVATION */});
      table.put(4,new int[] { 2, 9 /* PROV_DERIVATION */});
      table.put(5,new int[] { 1, 11 /* PROV_ATTRIBUTION */, 2, 11 /* PROV_ATTRIBUTION */});
      table.put(6,new int[] { });
      return table;
    }

    public static String[] __getAllTypes() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateCommonMethod6static
      // in file CompilerCommon.java, at line 1578
      String [] table = new String[9];
      table[0]="http://www.w3.org/ns/prov#Entity";
      table[1]="http://www.w3.org/ns/prov#Activity";
      table[2]="http://www.w3.org/ns/prov#Agent";
      table[3]="http://openprovenance.org/ns/ptm#CompactBindings";
      table[4]="http://openprovenance.org/ns/ptm#MergingTemplates";
      table[5]="http://openprovenance.org/ns/ptm#ProvDocument";
      table[6]="http://openprovenance.org/ns/ptm#ProvTemplate";
      table[7]="http://schema.org/Person";
      table[8]="http://www.w3.org/ns/prov#Person";
      return table;
    }

    /**
     * Null method for composite
     * @return null
     */
    public String[] getOutputs() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateOutputsMethod
      // in file CompilerCommon.java, at line 966
      return outputs;
    }

    /**
     * Null method for composite
     * @return null
     */
    public String[] getCompulsoryInputs() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateCompulsoryInputsMethod
      // in file CompilerCommon.java, at line 975
      return compulsoryInputs;
    }

    /**
     * Null method for composite
     * @return null
     */
    public String[] getInputs() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateInputsMethod
      // in file CompilerCommon.java, at line 984
      return inputs;
    }

    /**
     * Converter to bean of type Ptm_mergingBean for template ptm_merging.
     * @param record an array of objects
     * @return a bean
     */
    public Ptm_mergingBean toBean(Object[] record) {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateFactoryMethodToBeanWithArray
      // in file CompilerCommon.java, at line 1728
      Ptm_mergingBean bean=new Ptm_mergingBean();
      bean.document=(String)record[1];
      bean.provenance=(String)record[2];
      bean.template1=(String)record[3];
      bean.template2=(String)record[4];
      bean.agent=(record[5]==null)?null:((record[5] instanceof String)?Integer.valueOf((String)(record[5])):(Integer)(record[5]));
      bean.merging=(record[6]==null)?null:((record[6] instanceof String)?Integer.valueOf((String)(record[6])):(Integer)(record[6]));
      bean.email=(String)record[7];
      bean.time=(String)record[8];
      return bean;
    }

    public static Ptm_mergingBean toBean(String __document, String __provenance, String __template1,
        String __template2, Integer __agent, Integer __merging, String __email, String __time) {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateFactoryMethodWithBean
      // in file CompilerCommon.java, at line 1634
      Ptm_mergingBean bean=new Ptm_mergingBean();
      bean.document=__document;
      bean.provenance=__provenance;
      bean.template1=__template1;
      bean.template2=__template2;
      bean.agent=__agent;
      bean.merging=__merging;
      bean.email=__email;
      bean.time=__time;
      return bean;
    }

    public Ptm_mergingBean newBean() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateNewBean
      // in file CompilerCommon.java, at line 1777
      Ptm_mergingBean bean=new Ptm_mergingBean();
      return bean;
    }

    public static Ptm_mergingBean examplar() {
      // Generated by class org.openprovenance.prov.template.compiler.common.CompilerCommon, method generateExamplarBean
      // in file CompilerCommon.java, at line 1798
      Ptm_mergingBean bean=new Ptm_mergingBean();
      bean.document="file/doc123-456.provn";
      bean.template1="file/template123.provn";
      bean.agent=Integer.valueOf("12345");
      bean.template2="file/template345.json";
      bean.provenance="file/prov-doc123-456.prov-csv";
      bean.merging=Integer.valueOf("12345");
      bean.email="luc.moreau@kcl.ac.uk";
      bean.time="2025-09-01T16:55:36.543+01:00";
      return bean;
    }

    public void sqlTuple(StringBuffer sb, String __document, String __provenance,
        String __template1, String __template2, Integer __agent, Integer __merging, String __email,
        String __time) {
      // Generated by class org.openprovenance.prov.template.compiler.CompilerSQL, method generateCommonSQLMethod2
      // in file CompilerSQL.java, at line 324
      sb.append("(");
      if (__document==null) {
        sb.append("''");
      } else {
        sb.append("'");
        sb.append(__document);
        sb.append("'");
      }
      sb.append(",");
      if (__provenance==null) {
        sb.append("''");
      } else {
        sb.append("'");
        sb.append(__provenance);
        sb.append("'");
      }
      sb.append(",");
      if (__template1==null) {
        sb.append("''");
      } else {
        sb.append("'");
        sb.append(__template1);
        sb.append("'");
      }
      sb.append(",");
      if (__template2==null) {
        sb.append("''");
      } else {
        sb.append("'");
        sb.append(__template2);
        sb.append("'");
      }
      sb.append(",");
      if (__agent==null) {
        sb.append("''");
      } else {
        sb.append("");
        sb.append(__agent);
      }
      sb.append(",");
      if (__merging==null) {
        sb.append("''");
      } else {
        sb.append("");
        sb.append(__merging);
      }
      sb.append(",");
      if (__email==null) {
        sb.append("''");
      } else {
        sb.append("'");
        sb.append(__email);
        sb.append("'");
      }
      sb.append(",");
      if (__time==null) {
        sb.append("''");
      } else {
        sb.append("'");
        sb.append(__time);
        sb.append("'");
      }
      sb.append(")");
    }
  }
