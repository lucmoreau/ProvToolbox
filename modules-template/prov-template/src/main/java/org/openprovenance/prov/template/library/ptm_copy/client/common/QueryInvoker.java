// Generated automatically by ProvToolbox for template configuration 'template_library'
// by class org.openprovenance.prov.template.compiler.CompilerQueryInvoker, method generateQueryInvoker,
// in file CompilerQueryInvoker.java, at line 27
package org.openprovenance.prov.template.library.ptm_copy.client.common;

public class QueryInvoker implements BeanProcessor {
  final StringBuilder sb;

  public QueryInvoker(StringBuilder sb) {
    this.sb = sb;
  }

  public final Ptm_expandingBean process(Ptm_expandingBean bean) {
    // Generated by class org.openprovenance.prov.template.compiler.CompilerQueryInvoker, method generateQueryInvoker
    // in file CompilerQueryInvoker.java, at line 61
    // Generated by class org.openprovenance.prov.template.compiler.CompilerQueryInvoker, method simpleQueryInvoker
    // in file CompilerQueryInvoker.java, at line 158
    sb.append("select * from ");
    sb.append("insert_ptm_expanding (");
    sb.append(bean.template);
    sb.append(",");
    sb.append(bean.bindings);
    sb.append(",");
    sb.append(bean.agent);
    sb.append(",");
    sb.append(bean.email);
    sb.append(",");
    sb.append(convertToTimestamptz(bean.time));
    sb.append(");");
    return bean;
  }

  public final Ptm_mexpandingBean process(Ptm_mexpandingBean bean) {
    // Generated by class org.openprovenance.prov.template.compiler.CompilerQueryInvoker, method generateQueryInvoker
    // in file CompilerQueryInvoker.java, at line 61
    // Generated by class org.openprovenance.prov.template.compiler.CompilerQueryInvoker, method simpleQueryInvoker
    // in file CompilerQueryInvoker.java, at line 158
    sb.append("select * from ");
    sb.append("insert_ptm_mexpanding (");
    sb.append(bean.mtemplate);
    sb.append(",");
    sb.append(bean.bindings);
    sb.append(",");
    sb.append(bean.agent);
    sb.append(",");
    sb.append(bean.email);
    sb.append(",");
    sb.append(convertToTimestamptz(bean.time));
    sb.append(");");
    return bean;
  }

  final String convertToTimestamptz(String time) {
    // Generated by class org.openprovenance.prov.template.compiler.CompilerQueryInvoker, method generateQueryInvoker
    // in file CompilerQueryInvoker.java, at line 80
    if (time==null) {
      return "NULL";
    } else {
      return "'"+time+"'::timestamptz";
    }
  }
}
